services:
  - type: cron
    name: umd-dining-scraper
    runtime: node
    repo: https://github.com/Cha04ic/umd-nutrition-tracker
    branch: main
    schedule: "50 4 * * 1"
    buildCommand: npm install
    startCommand: >
      /bin/bash -lc "export UMD_DINING_FETCH_NUTRITION=true
      START_DATE=$(date +%m/%d/%Y)
      END_DATE=$(date -d '+6 day' +%m/%d/%Y)
      node --import tsx scripts/backfill-umd-menu.mjs"
    envVars:
      - key: DATABASE_URL
        sync: false
